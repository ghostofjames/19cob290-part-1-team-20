<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="js/jquery.js"></script>

    <script>
        // HARDCODED LOGIN CREDENTIALS
        const USERNAME = 'james';
        const PASSWORD = 'james';

        $(document).ready(function() {

            $('#loginForm').on('submit', function(e) {
                var data = $(this).serializeArray().reduce(function(obj, item) {
                    // Function stolen from https://stackoverflow.com/a/24012884 cause lazy to write own
                    obj[item.name] = item.value;
                    return obj;
                }, {});

                console.log(data);

                if (validateLogin(data.username, data.password)) {
                    //FUTURE: create user session and redirect to correct page
                    alert('Successful Login');
                } else {
                    $('#error').show();
                }

                e.preventDefault(); // Prevent normal form submission
            });

            function validateLogin(username, password) {
                //FUTURE: add proper validation - database request would go here
                if (username == USERNAME & password == PASSWORD) {
                    return true;
                } else {
                    return false;
                };
            };

        });

    </script>

    <style>
        #error {
            display: none;
        }

    </style>
</head>

<body>
    <div>
        <form id="loginForm" name="loginForm">
            <input type="text" id="username" name="username" placeholder="Username" required autofocus>
            <input type="password" id="password" name="password" placeholder="Password" required>
            <span id="error">Invalid Login</span>
            <input type="submit" value="Login">
        </form>
    </div>
</body>

</html>
